<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ============================================================================
       🏢 DELPHINE BEACH RESIDENCES - UNIT B906 PAYMENT TRACKER
       ============================================================================
       
       📋 PURPOSE: Real estate payment tracking dashboard for monitoring progress
                   on property purchase installments and calculating overpayments
       
       🎯 TARGET USER: Property buyer who needs to track payments against developer's
                       Statement of Account (SOA) and monitor payment milestones
       
       💰 CALCULATION METHOD: Separates property payments from SPA registration fees
                             - Property payments count toward purchase milestones
                             - SPA fees are additional administrative costs
                             - Overpayment credit is calculated based on property progress only
       
       📱 DESIGN: Mobile-first responsive design with collapsible sections for
                  easy viewing on smartphones and tablets
       
       🔄 LAST UPDATED: Based on developer SOA dated September 15, 2025
       ============================================================================ -->
  
  <meta charset="UTF-8">
  <title>Delphine Beach Residence – Payment Tracker</title>
  
  <!-- ============================================================================
       🎨 CSS STYLES SECTION
       ============================================================================
       
       🏗️ STRUCTURE:
       1. Base styling (body, typography, colors)
       2. Layout components (tables, sections, cards)
       3. Property overview grid (compact 2x2x2 layout)
       4. Payment section styling (collapsible sections)
       5. Mobile responsiveness (@media queries)
       6. Interactive elements (hover effects, transitions)
       
       🎯 DESIGN PHILOSOPHY:
       - Mobile-first: Optimized for smartphone viewing
       - Clean & modern: Professional look suitable for financial tracking
       - Color coding: Different colors for different payment states
       - Accessibility: High contrast, readable fonts, clear hierarchy
       ============================================================================ -->
  
  <style>
    /* ========================================================================
       🎨 MODERN DESIGN SYSTEM - Fresh, clean aesthetic
       ======================================================================== */
    
    /* CSS Custom Properties for consistent theming */
    :root {
      --primary-color: #667eea;
      --secondary-color: #764ba2;
      --accent-color: #f093fb;
      --success-color: #4ecdc4;
      --warning-color: #feca57;
      --text-primary: #2d3748;
      --text-secondary: #718096;
      --text-light: #a0aec0;
      --bg-primary: #ffffff;
      --bg-secondary: #f7fafc;
      --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-heavy: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      --border-radius: 16px;
      --border-radius-large: 24px;
    }
    
    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    /* Modern body styling with improved typography */
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-secondary);
      padding: 20px;
      min-height: 100vh;
    }
    
    /* Container for the entire page */
    .page-container {
      max-width: 1200px;
      margin: 0 auto;
      background: var(--bg-primary);
      border-radius: var(--border-radius-large);
      box-shadow: var(--shadow-heavy);
      overflow: hidden;
    }
    
    /* Modern header with gradient */
    .header {
      background: var(--bg-gradient);
      color: white;
      padding: 3rem 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
    }
    
    .header-content {
      position: relative;
      z-index: 2;
    }
    
    .header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      letter-spacing: -0.025em;
    }
    
    .header .subtitle {
      font-size: 1.125rem;
      opacity: 0.9;
      font-weight: 400;
    }
    
    /* ========================================================================
       💳 MODERN CARD SYSTEM - Elegant overview dashboard
       ======================================================================== */
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }
    
    .card {
      background: var(--bg-primary);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      box-shadow: var(--shadow-light);
      transition: all 0.3s ease;
      border: 1px solid #e2e8f0;
    }
    
    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-medium);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .card-icon {
      width: 3rem;
      height: 3rem;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      margin-right: 1rem;
    }
    
    .card-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .card-value {
      font-size: 1.875rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }
    
    .card-subtitle {
      font-size: 0.875rem;
      color: var(--text-light);
    }
    
    /* Card variations */
    .card-primary .card-icon {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
    }
    
    .card-success .card-icon {
      background: linear-gradient(135deg, var(--success-color), #48bb78);
      color: white;
    }
    
    .card-warning .card-icon {
      background: linear-gradient(135deg, var(--warning-color), #f6ad55);
      color: white;
    }
    
    /* ========================================================================
       📊 MODERN TABLE DESIGN - Clean and elegant
       ======================================================================== */
    
    .table-container {
      background: var(--bg-primary);
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow-light);
      margin-bottom: 2rem;
    }
    
    .table-header {
      padding: 1.5rem;
      background: var(--bg-gradient);
      color: white;
    }
    
    .table-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 1rem 1.5rem;
      text-align: left;
      border-bottom: 1px solid #e2e8f0;
    }
    
    th {
      background: #f8fafc;
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .status-paid {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-upcoming {
      background: #fef3c7;
      color: #92400e;
    }
    
    .status-pending {
      background: #e0e7ff;
      color: #3730a3;
    }
    
    /* ========================================================================
       � RESPONSIVE DESIGN - Mobile-first approach
       ======================================================================== */
    
    @media (max-width: 768px) {
      .page-container {
        margin: 0;
        border-radius: 0;
      }
      
      .header {
        padding: 2rem 1rem;
      }
      
      .header h1 {
        font-size: 1.875rem;
      }
      
      .content {
        padding: 1rem;
      }
      
      .dashboard-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .card {
        padding: 1rem;
      }
      
      .card-value {
        font-size: 1.5rem;
      }
      
      table {
        font-size: 0.875rem;
      }
      
      th, td {
        padding: 0.75rem 0.5rem;
      }
      
      .status-badge {
        font-size: 0.625rem;
        padding: 0.125rem 0.5rem;
      }
    }
    
    /* ========================================================================
       ✨ ANIMATIONS - Subtle motion design
       ======================================================================== */
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .card {
      animation: fadeInUp 0.6s ease-out;
    }
    
    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.2s; }
    .card:nth-child(3) { animation-delay: 0.3s; }
    .card:nth-child(4) { animation-delay: 0.4s; }
    .card:nth-child(5) { animation-delay: 0.5s; }
    .card:nth-child(6) { animation-delay: 0.6s; }
    
    /* Main table styling with enhanced rounded card appearance */
    table { 
      border-collapse: separate;
      border-spacing: 0;
      width: 100%; 
      margin-top: 15px;
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 12px 40px rgba(0,0,0,0.06);
      border: none;
    }
    
    /* Table headers and cells with softer borders for better blending */
    th, td { 
      border: 1px solid #f0f4f8; 
      padding: 16px 20px; 
      text-align: left;
      border-right: none;
      border-bottom: none;
    }
    
    /* Add right border only between cells, not on edges */
    th:not(:last-child), td:not(:last-child) {
      border-right: 1px solid #f0f4f8;
    }
    
    /* Add bottom border only between rows, not on last row */
    tr:not(:last-child) th,
    tr:not(:last-child) td {
      border-bottom: 1px solid #f0f4f8;
    }
    
    /* Enhanced rounded corners for first and last cells */
    th:first-child {
      border-top-left-radius: 20px;
    }
    
    th:last-child {
      border-top-right-radius: 20px;
    }
    
    tr:last-child td:first-child {
      border-bottom-left-radius: 20px;
    }
    
    tr:last-child td:last-child {
      border-bottom-right-radius: 20px;
    }
    
    /* Table header styling with gradient background */
    th { 
      background: linear-gradient(135deg, #1a4c5d 0%, #2c5f2d 100%);
      color: white;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-size: 0.9em;
    }
    
    /* ========================================================================
       🎯 STATUS INDICATOR CLASSES - Cool modern theme with cyan/indigo palette
       ======================================================================== */
    
    /* Light cyan highlighting for completed/paid items */
    .highlight { 
      background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
      border-left: 4px solid #009688;
    }
    
    /* Light indigo highlighting for upcoming/pending payments */
    .upcoming { 
      background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
      border-left: 4px solid #3f51b5;
    }
    
    /* Teal text for overpaid amounts - matches cool theme */
    .overpaid { 
      color: #009688; 
      font-weight: bold; 
    }
    
    /* ========================================================================
       ⏰ SPECIAL DISPLAY COMPONENTS - Cool cyan theme design
       ======================================================================== */
    
    /* Countdown timer styling with cool indigo appearance */
    .countdown { 
      font-size: 1.4em; 
      color: #3f51b5; 
      margin-top: 15px;
      background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(63, 81, 181, 0.2);
      font-weight: bold;
    }
    
    /* Generic card-style container for payment details */
    .payment-details { 
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      margin: 15px 0; 
      padding: 20px; 
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      border: 1px solid #e8eaed;
    }
    
    /* Cool indigo verification/summary box styling - matches theme */
    .verification { 
      background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
      padding: 20px; 
      border-left: 6px solid #3f51b5; 
      margin: 20px 0;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(63, 81, 181, 0.2);
    }
    
    .small-table { 
      width: 100%; 
    }
    
    .amount-right { 
      text-align: right; 
      font-weight: 600;
    }
    
    .plan-table { 
      background: #ffffff; 
      border: 3px solid #1a4c5d; 
      margin: 25px 0;
      border-radius: 12px;
      overflow: hidden;
    }
    
    .plan-table th { 
      background: linear-gradient(135deg, #1a4c5d 0%, #2c5f2d 100%);
      color: white; 
      text-align: center;
      padding: 16px;
      font-size: 1em;
    }
    
    .center { 
      text-align: center; 
    }
    
    .receipt-ref { 
      font-size: 0.75em; 
      color: #6c757d;
      font-family: 'Courier New', monospace;
      background: #f8f9fa;
      padding: 2px 6px;
      border-radius: 4px;
    }
    
    .usd-amount { 
      color: #2980b9; 
      font-size: 0.9em;
      font-weight: 500;
    }
    
    .currency-note { 
      font-size: 0.8em; 
      color: #6c757d; 
      margin-top: 8px;
      background: white;
      padding: 8px 12px;
      border-radius: 6px;
      display: inline-block;
    }
    
    .percentage-paid { 
      color: #2980b9; 
      font-weight: bold;
      background: #e3f2fd;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.95em;
    }
    
    /* ========================================================================
       🏢 PROPERTY OVERVIEW GRID - Compact mobile-friendly dashboard
       ========================================================================
       
       📱 LAYOUT STRUCTURE: 2x2x2 Grid Design
       Row 1: Purchase Price | SPA Registration
       Row 2: Total Paid | Remaining Balance  
       Row 3: Overpayment Credit | Next Payment Due
       
       🎯 PURPOSE: Quick at-a-glance summary of payment status optimized for mobile
       ======================================================================== */
    
    /* Main container for property overview card */
    .header-info {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      padding: 18px;
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      border-left: 4px solid #1a4c5d;
      max-width: 100%;
    }
    
    /* Overview section title */
    .header-info h3 {
      margin: 0 0 12px 0;
      color: #1a4c5d;
      font-size: 1.4em;
      text-align: center;
      font-weight: 700;
    }
    
    /* 2-column grid layout for overview items */
    .overview-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;  /* Two equal columns */
      gap: 10px;
      margin-bottom: 12px;
    }
    
    /* Individual grid item styling */
    .overview-item {
      display: flex;
      flex-direction: column;
      padding: 10px 12px;
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border-radius: 8px;
      border: 1px solid #e9ecef;
      transition: all 0.2s ease;
      min-height: 55px;
      justify-content: center;
      text-align: center;
    }
    
    /* Hover effect for interactive feel */
    .overview-item:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    /* Label text styling (e.g., "Purchase Price", "Total Paid") */
    .overview-label {
      font-weight: 600;
      color: #2c3e50;
      font-size: 0.75em;
      margin-bottom: 3px;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }
    
    /* Value text styling (e.g., "AED 3,125,008") */
    .overview-value {
      font-weight: bold;
      font-size: 0.95em;
      color: #1a4c5d;
      line-height: 1.1;
    }
    
    /* ========================================================================
       🎨 OVERVIEW ITEM COLOR CODING - Grouped color themes
       ======================================================================== */
    
    /* ========================================
       🏠 PURCHASE PRICE THEME - Property ownership related
       ======================================== */
    
    /* Purchase Price, Remaining Balance, Overpayment Credit */
    .property-theme {
      background: linear-gradient(135deg, #e8f4fd 0%, #d1ecf1 100%);
      border-left: 3px solid #17a2b8;
    }
    
    .property-theme .overview-value {
      color: #138496;
      font-size: 1.0em;
    }
    
    /* ========================================
       📋 SPA REGISTRATION THEME - Administrative and payment related  
       ======================================== */
    
    /* SPA Registration, Total Paid, Next Payment Due */
    .admin-theme {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-left: 3px solid #6c757d;
    }
    
    .admin-theme .overview-value {
      color: #495057;
      font-size: 1.0em;
    }
    
    /* ========================================
       🔧 LEGACY CLASSES - Kept for backward compatibility
       ======================================== */
    
    /* Wide items that span both columns (legacy - kept for flexibility) */
    .wide-item {
      grid-column: span 2;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-left: 3px solid #6c757d;
      padding: 12px;
    }
    
    .wide-item .overview-value {
      color: #495057;
      font-size: 1.1em;
    }
    
    /* Green highlighting for positive financial items (Total Paid) */
    .highlight-item {
      background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
      border-left: 3px solid #28a745;
    }
    
    .highlight-item .overview-value {
      color: #28a745;
      font-size: 1.05em;
    }
    
    /* Yellow/orange highlighting for credit items (Overpayment) */
    .credit-item {
      background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
      border-left: 3px solid #ffc107;
    }
    
    .credit-item .overview-value {
      color: #e67e22;
    }
    
    /* Blue highlighting for upcoming payment items */
    .next-payment-item {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border-left: 3px solid #2196F3;
    }
    
    .next-payment-item .overview-value {
      color: #1976d2;
      font-size: 1.05em;
    }
    
    .currency-note {
      font-size: 0.65em;
      color: #6c757d;
      text-align: center;
      margin-top: 8px;
      padding: 6px;
      background: #f8f9fa;
      border-radius: 6px;
    }
    
    .usd-amount {
      color: #2980b9;
      font-size: 0.8em;
      font-weight: 500;
      display: block;
      margin-top: 1px;
    }
    
    .overview-subtitle {
      color: #6c757d;
      font-size: 0.7em;
      margin-top: 1px;
      font-weight: 500;
    }
    
    .header-info p {
      margin: 8px 0;
      font-size: 1.1em;
    }
    
    /* ========================================================================
       🚨 NEXT PAYMENT ALERT SECTION - Cool cyan theme upcoming payment
       ======================================================================== */
    
    /* Cyan-themed important payment reminder box */
    .next-payment {
      background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
      padding: 25px;
      border-radius: 12px;
      border-left: 6px solid #009688;
      margin: 25px 0;
      box-shadow: 0 6px 20px rgba(0, 150, 136, 0.15);
    }
    
    .next-payment p {
      margin: 10px 0;
      font-size: 1.1em;
    }
    
    /* ========================================================================
       📊 VERIFICATION SUMMARY SECTION - Clean status overview
       ======================================================================== */
    
    .verification h3 {
      color: #3f51b5;
      margin-top: 0;
    }
    
    .verification p {
      margin: 12px 0;
      font-size: 1.05em;
      color: #424242;
    }

    /* ========================================================================
       🔄 COLLAPSIBLE PAYMENT SECTIONS - Interactive expandable sections
       ========================================================================
       
       🎯 PURPOSE: Organize payment details into collapsible sections to save
                   screen space and improve mobile user experience
       
       🔧 FUNCTIONALITY: Click header to expand/collapse content with smooth animations
       ======================================================================== */
    
    /* Main container for each collapsible payment section */
    .payment-section {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      margin: 15px 0;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      border: 1px solid #e9ecef;
      overflow: hidden;
    }

    /* Clickable header with payment summary information */
    .payment-header {
      padding: 20px;
      cursor: pointer;
      background: linear-gradient(135deg, #1a4c5d 0%, #2c5f2d 100%);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    /* Hover effect for payment headers */
    .payment-header:hover {
      background: linear-gradient(135deg, #234a5c 0%, #3a6f3d 100%);
      transform: translateY(-2px);
    }

    /* Section title within payment header */
    .payment-header h3 {
      margin: 0;
      color: white;
      font-size: 1.2em;
    }

    /* Container for summary items in header */
    .payment-summary {
      display: flex;
      gap: 30px;
      align-items: center;
      flex-wrap: wrap;
    }

    /* Individual summary item (Total AED, Payments count, etc.) */
    .summary-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Label for summary items */
    .summary-label {
      font-size: 0.8em;
      opacity: 0.9;
      margin-bottom: 4px;
    }

    /* Value for summary items */
    .summary-value {
      font-size: 1.1em;
      font-weight: bold;
    }

    /* Expand/collapse arrow icon */
    .expand-icon {
      font-size: 1.5em;
      transition: transform 0.3s ease;
      color: #fff;
    }

    /* Rotate arrow when section is expanded */
    .expanded .expand-icon {
      transform: rotate(180deg);
    }

    /* Collapsible content area (initially hidden) */
    .payment-content {
      max-height: 0;
      overflow: hidden;
      transition: all 0.4s ease;
      opacity: 0;
    }

    /* Expanded state showing content */
    .payment-content.expanded {
      max-height: 1000px;
      opacity: 1;
      padding: 20px;
    }

    /* Helper text for user interaction */
    .click-hint {
      font-size: 0.85em;
      opacity: 0.8;
      color: #fff;
      margin-left: 10px;
    }

    /* ========================================================================
       📱 MOBILE RESPONSIVENESS - Optimized layout for smartphones
       ========================================================================
       
       📲 BREAKPOINT: 768px and below (tablets and smartphones)
       
       🎯 OPTIMIZATIONS:
       - Reduced padding and font sizes
       - Maintained 2-column grid for overview
       - Adjusted summary layout for narrow screens
       - Smaller table text for better mobile viewing
       ======================================================================== */
    
    @media (max-width: 768px) {
      /* Reduce page padding for mobile */
      body { 
        padding: 8px; 
        font-size: 13px;
      }
      
      /* Smaller main heading for mobile */
      h1 { 
        font-size: 1.4em; 
        margin-bottom: 12px;
        padding: 0 5px;
      }
      
      /* Compact header info section */
      .header-info {
        padding: 12px;
        margin-bottom: 12px;
      }
      
      /* Adjusted overview section title */
      .header-info h3 {
        font-size: 1.2em;
        margin-bottom: 10px;
      }
      
      /* Maintain 2-column grid on mobile */
      .overview-grid {
        grid-template-columns: 1fr 1fr;
        gap: 8px;
      }
      
      /* Wide items and next payment span both columns */
      .wide-item, .next-payment-item {
        grid-column: span 2;
      }
      
      /* Smaller overview items for mobile */
      .overview-item {
        min-height: 45px;
        padding: 8px 10px;
      }
      
      /* Smaller text in overview */
      .overview-label {
        font-size: 0.7em;
      }
      
      .overview-value {
        font-size: 0.85em;
      }
      
      /* Specific sizing for highlighted items */
      .wide-item .overview-value, .next-payment-item .overview-value {
        font-size: 0.95em;
      }
      
      /* Smaller USD amounts */
      .usd-amount {
        font-size: 0.75em;
      }
      
      /* Smaller subtitles */
      .overview-subtitle {
        font-size: 0.65em;
      }
      
      /* Compact currency note */
      .currency-note {
        font-size: 0.6em;
        padding: 5px;
      }
      
      /* Smaller table text for mobile */
      table { font-size: 0.8em; }
      th, td { padding: 6px 8px; }
      
      /* Vertical payment summary layout for mobile */
      .payment-summary {
        flex-direction: column;
        gap: 12px;
      }
      
      /* Horizontal summary items for better mobile layout */
      .summary-item {
        flex-direction: row;
        gap: 8px;
      }
    }
    
    /* ========================================================================
       ✨ INTERACTIVE EFFECTS - Subtle hover states
       ======================================================================== */
    
    /* Subtle hover effect for table rows */
    tr:hover {
      background-color: rgba(26, 76, 93, 0.05);
      transition: background-color 0.3s ease;
    }
    
    /* Hover effect for payment plan table */
    .plan-table tr:hover {
      background-color: rgba(26, 76, 93, 0.08);
    }
  </style>
</head>
<body>

  <!-- ============================================================================
       🏢 MAIN PAGE HEADER
       ============================================================================ -->
  
  <h1>Delphine Beach Residences – Tower B Unit 906</h1>
    <!-- Modern Dashboard Cards -->
    <div class="dashboard-grid">
      <!-- Purchase Price Card -->
      <div class="card card-primary">
        <div class="card-header">
          <div class="card-icon">🏠</div>
          <div>
            <div class="card-title">Purchase Price</div>
          </div>
        </div>
        <div class="card-value" id="purchasePrice">AED 3,125,008</div>
        <div class="card-subtitle">Property value excluding fees</div>
      </div>
      
      <!-- Total Paid Card -->
      <div class="card card-success">
        <div class="card-header">
          <div class="card-icon">💰</div>
          <div>
            <div class="card-title">Total Paid</div>
          </div>
        </div>
        <div class="card-value" id="totalPaid">AED 1,341,410</div>
        <div class="card-subtitle">Including SPA registration fees</div>
      </div>
      
      <!-- Remaining Balance Card -->
      <div class="card card-warning">
        <div class="card-header">
          <div class="card-icon">📊</div>
          <div>
            <div class="card-title">Remaining Balance</div>
          </div>
        </div>
        <div class="card-value" id="remainingBalance">AED 1,784,598</div>
        <div class="card-subtitle">Property balance remaining</div>
      </div>
      
      <!-- Overpayment Credit Card -->
      <div class="card card-success">
        <div class="card-header">
          <div class="card-icon">✨</div>
          <div>
            <div class="card-title">Overpayment Credit</div>
          </div>
        </div>
        <div class="card-value" id="overpayment">AED 90,406.80</div>
        <div class="card-subtitle">28.9% of next installment covered</div>
      </div>
      
      <!-- Next Payment Card -->
      <div class="card card-primary">
        <div class="card-header">
          <div class="card-icon">⏰</div>
          <div>
            <div class="card-title">Next Payment Due</div>
          </div>
        </div>
        <div class="card-value" id="nextPayment">AED 222,094</div>
        <div class="card-subtitle">March 24, 2026 (after credit)</div>
      </div>
      
      <!-- SPA Registration Card -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background: #e2e8f0; color: #64748b;">📄</div>
          <div>
            <div class="card-title">SPA Registration</div>
          </div>
        </div>
        <div class="card-value" id="registrationFee">AED 1,000</div>
        <div class="card-subtitle">Administrative fee (paid)</div>
      </div>
    </div>
      
      <!-- Next payment amount after applying overpayment credit -->
      <div class="overview-item admin-theme">
        <div class="overview-label">Next Payment Due (March 2026)</div>
        <div class="overview-value" id="installmentBalance"></div>
      </div>
    </div>
    <!-- Exchange rate note for USD conversions -->
    <div class="currency-note">* USD conversion at 1 AED = 0.272 USD (approximate rate)</div>
  </div>

    <!-- Modern Payment Plan Table -->
    <div class="table-container">
      <div class="table-header">
        <h2 class="table-title">📋 Payment Plan Schedule</h2>
      </div>
      <table>
        <thead>
          <tr>
            <th>Installment</th>
            <th>Percentage</th>
            <th>Amount (AED)</th>
            <th>Amount (USD)</th>
            <th>Due Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Booking Amount</strong></td>
            <td>20%</td>
            <td>625,001.59</td>
            <td class="usd-amount">170,000</td>
            <td>30/09/2024</td>
            <td><span class="status-badge status-paid">✅ Paid</span></td>
          </tr>
          <tr>
            <td><strong>First Installment</strong></td>
            <td>10%</td>
            <td>312,500.80</td>
            <td class="usd-amount">85,000</td>
            <td>29/03/2025</td>
            <td><span class="status-badge status-paid">✅ Paid</span></td>
          </tr>
          <tr>
            <td><strong>Second Installment</strong></td>
            <td>10%</td>
            <td>312,500.80</td>
            <td class="usd-amount">85,000</td>
            <td>25/09/2025</td>
            <td><span class="status-badge status-paid">✅ Paid</span></td>
          </tr>
          <tr>
            <td><strong>Third Installment</strong></td>
            <td>10%</td>
            <td>312,500.80</td>
            <td class="usd-amount">85,000</td>
            <td>24/03/2026</td>
            <td><span class="status-badge status-upcoming">⏳ Upcoming</span></td>
          </tr>
          <tr>
            <td><strong>Fourth Installment</strong></td>
            <td>10%</td>
            <td>312,500.80</td>
            <td class="usd-amount">85,000</td>
            <td>20/09/2026</td>
            <td><span class="status-badge status-pending">⏳ Pending</span></td>
          </tr>
          <tr>
            <td><strong>Final Installment</strong></td>
            <td>40%</td>
            <td>1,250,003.18</td>
            <td class="usd-amount">340,001</td>
            <td>On Completion</td>
            <td><span class="status-badge status-pending">⏳ Pending</span></td>
          </tr>
        </tbody>
      </table>
    </div>

  <h2>Payment Summary</h2>
  <table>
    <thead>
      <tr>
        <th>Installment</th>
        <th class="center">Paid Amount (AED)</th>
        <th class="center">Paid Amount (USD)</th>
      </tr>
    </thead>
    <tbody>
      <tr class="highlight">
        <td>Down Payment (Booking Amount)</td>
        <td class="center">623,650</td>
        <td class="center usd-amount">169,633</td>
      </tr>
      <tr class="highlight">
        <td>First Installment</td>
        <td class="center">318,000</td>
        <td class="center usd-amount">86,496</td>
      </tr>
      <tr class="highlight">
        <td>Second Installment</td>
        <td class="center">398,760</td>
        <td class="center usd-amount">108,463</td>
      </tr>
    </tbody>
  </table>

  <!-- ============================================================================
       💳 DETAILED PAYMENT RECORDS - Collapsible sections with receipt references
       ============================================================================
       
       🗂️ ORGANIZATION: Each installment is in its own collapsible section
       📋 RECEIPT TRACKING: Every payment linked to specific receipt number
       🎯 PURPOSE: Verification against bank statements and developer SOA
       💡 INTERACTION: Click section headers to expand/collapse details
       ============================================================================ -->

  <h2>Payment Details & Receipt References</h2>
  
  <!-- Down Payment Section -->
  <div class="payment-section">
    <div class="payment-header" onclick="toggleSection('downpayment')">
      <h3>💰 Down Payment (Booking Amount)</h3>
      <div class="payment-summary">
        <div class="summary-item">
          <span class="summary-label">Total AED</span>
          <span class="summary-value">623,650</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Total USD</span>
          <span class="summary-value">169,633</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Payments</span>
          <span class="summary-value">8 receipts</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Percentage</span>
          <span class="summary-value">20.00%</span>
        </div>
        <span class="click-hint">Click to view details</span>
        <span class="expand-icon">▼</span>
      </div>
    </div>
    <div class="payment-content" id="downpayment-content">
      <table class="small-table">
        <thead>
          <tr><th>Date</th><th class="center">Amount (AED)</th><th class="center">Amount (USD)</th><th class="center">Status</th><th class="center">Receipt Reference</th></tr>
        </thead>
        <tbody>
          <tr><td>29-Sep-24</td><td class="center">65,000</td><td class="center usd-amount">17,680</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-09-29/R-236837</td></tr>
          <tr><td>2-Oct-24</td><td class="center">110,000</td><td class="center usd-amount">29,920</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-02/R-237467</td></tr>
          <tr><td>3-Oct-24</td><td class="center">102,000</td><td class="center usd-amount">27,744</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-03/R-238196</td></tr>
          <tr><td>4-Oct-24</td><td class="center">37,000</td><td class="center usd-amount">10,064</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-04/R-238479</td></tr>
          <tr><td>8-Oct-24</td><td class="center">124,500</td><td class="center usd-amount">33,864</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-08/R-238503</td></tr>
          <tr><td>8-Oct-24</td><td class="center">92,000</td><td class="center usd-amount">25,024</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-08/R-238507</td></tr>
          <tr><td>9-Oct-24</td><td class="center">38,050</td><td class="center usd-amount">10,350</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-09/R-238677</td></tr>
          <tr><td>10-Oct-24</td><td class="center">55,100</td><td class="center usd-amount">14,987</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-09/R-238696</td></tr>
          <tr style="font-weight: bold; background: #e8ffe8;">
            <td><strong>Total</strong></td><td class="center"><strong>623,650</strong></td><td class="center usd-amount"><strong>169,633</strong></td><td class="center"><strong>20.00%</strong></td><td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- First Installment Section -->
  <div class="payment-section">
    <div class="payment-header" onclick="toggleSection('first')">
      <h3>🏦 First Installment</h3>
      <div class="payment-summary">
        <div class="summary-item">
          <span class="summary-label">Total AED</span>
          <span class="summary-value">318,000</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Total USD</span>
          <span class="summary-value">86,496</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Payments</span>
          <span class="summary-value">4 receipts</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Percentage</span>
          <span class="summary-value">10.20%</span>
        </div>
        <span class="click-hint">Click to view details</span>
        <span class="expand-icon">▼</span>
      </div>
    </div>
    <div class="payment-content" id="first-content">
      <table class="small-table">
        <thead>
          <tr><th>Date</th><th class="center">Amount (AED)</th><th class="center">Amount (USD)</th><th class="center">Status</th><th class="center">Receipt Reference</th></tr>
        </thead>
        <tbody>
          <tr><td>15-Oct-24</td><td class="center">110,000</td><td class="center usd-amount">29,920</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-10-15/R-240527</td></tr>
          <tr><td>26-Nov-24</td><td class="center">54,000</td><td class="center usd-amount">14,688</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-11-26/R-443077</td></tr>
          <tr><td>26-Nov-24</td><td class="center">54,000</td><td class="center usd-amount">14,688</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2024-11-26/R-443081</td></tr>
          <tr><td>7-Jan-25</td><td class="center">100,000</td><td class="center usd-amount">27,200</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2025-01-07/R-456514</td></tr>
          <tr style="font-weight: bold; background: #e8ffe8;">
            <td><strong>Total</strong></td><td class="center"><strong>318,000</strong></td><td class="center usd-amount"><strong>86,496</strong></td><td class="center"><strong>10.20%</strong></td><td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Second Installment Section -->
  <div class="payment-section">
    <div class="payment-header" onclick="toggleSection('second')">
      <h3>🏗️ Second Installment</h3>
      <div class="payment-summary">
        <div class="summary-item">
          <span class="summary-label">Total AED</span>
          <span class="summary-value">398,760</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Total USD</span>
          <span class="summary-value">108,463</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Payments</span>
          <span class="summary-value">5 receipts</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Percentage</span>
          <span class="summary-value">12.79%</span>
        </div>
        <span class="click-hint">Click to view details</span>
        <span class="expand-icon">▼</span>
      </div>
    </div>
    <div class="payment-content" id="second-content">
      <table class="small-table">
        <thead>
          <tr><th>Date</th><th class="center">Amount (AED)</th><th class="center">Amount (USD)</th><th class="center">Status</th><th class="center">Receipt Reference</th></tr>
        </thead>
        <tbody>
          <tr><td>4-Feb-25</td><td class="center">100,000</td><td class="center usd-amount">27,200</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2025-02-04/R-480841</td></tr>
          <tr><td>15-Feb-25</td><td class="center">58,760</td><td class="center usd-amount">15,983</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2025-02-15/R-486342</td></tr>
          <tr><td>5-Mar-25</td><td class="center">65,000</td><td class="center usd-amount">17,680</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2025-03-05/R-493793</td></tr>
          <tr><td>23-Apr-25</td><td class="center">75,000</td><td class="center usd-amount">20,400</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2025-04-23/R-527323</td></tr>
          <tr><td>3-Jun-25</td><td class="center">100,000</td><td class="center usd-amount">27,200</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2025-06-03/R-596092</td></tr>
          <tr style="font-weight: bold; background: #e8ffe8;">
            <td><strong>Total</strong></td><td class="center"><strong>398,760</strong></td><td class="center usd-amount"><strong>108,463</strong></td><td class="center"><strong>12.79%</strong></td><td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Registration Fee Section -->
  <div class="payment-section">
    <div class="payment-header" onclick="toggleSection('registration')">
      <h3>📋 Registration Fee (Additional)</h3>
      <div class="payment-summary">
        <div class="summary-item">
          <span class="summary-label">Total AED</span>
          <span class="summary-value">1,000</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Total USD</span>
          <span class="summary-value">272</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Payments</span>
          <span class="summary-value">1 receipt</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Status</span>
          <span class="summary-value">Paid</span>
        </div>
        <span class="click-hint">Click to view details</span>
        <span class="expand-icon">▼</span>
      </div>
    </div>
    <div class="payment-content" id="registration-content">
      <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #ffc107;">
        <strong>⚠️ Note:</strong> This registration fee is <strong>additional to the purchase price</strong> and does not count towards the property payment milestones.
      </div>
      <table class="small-table">
        <thead>
          <tr><th>Date</th><th>Amount (AED)</th><th>Amount (USD)</th><th>Status</th><th>Receipt Reference</th></tr>
        </thead>
        <tbody>
          <tr><td>08-May-25</td><td class="center">1,000</td><td class="center usd-amount">272</td><td class="center">Paid</td><td class="receipt-ref">De-BR-DE-B906/2025-05-10/R-598157</td></tr>
          <tr style="font-weight: bold; background: #e8ffe8;">
            <td><strong>Total</strong></td><td class="center"><strong>1,000</strong></td><td class="center usd-amount"><strong>272</strong></td><td class="center"><strong>Additional Fee</strong></td><td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="next-payment">
    <h2 style="margin-top: 0; border-bottom: none; color: #009688;">⏰ Next Payment 💳</h2>
    <p><strong>📅 Third Installment</strong></p>
    <p><strong>Due Date:</strong> 24 March 2026</p>
    <p><strong>Due Amount:</strong> AED 312,500.80 <span class="usd-amount">(USD 85,000)</span></p>
    <p id="countdown" class="countdown"></p>
  </div>

  <div class="verification">
    <h3>Payment Status Summary</h3>
    <p id="overpaidStatus"></p>
  </div>

  <!-- ============================================================================
       👤 FOOTER - Subtle professional footer
       ============================================================================ -->
  
  <footer style="
    margin-top: 50px; 
    padding: 20px; 
    text-align: center; 
    background: rgba(248, 249, 250, 0.5);
    border-top: 1px solid rgba(224, 224, 224, 0.3);
  ">
    <p style="
      margin: 0; 
      color: #8a8a8a; 
      font-size: 0.85em;
      font-weight: 400;
      letter-spacing: 0.2px;
    ">
      Created by <span style="color: #666;">SANOOP SYAMALAN</span> • Associate Director • Kennedy Property Brokers LLC
    </p>
  </footer>

    </div>

    <!-- Modern Footer -->
    <div style="
      padding: 2rem;
      text-align: center;
      background: #f8fafc;
      border-top: 1px solid #e2e8f0;
      color: #718096;
      font-size: 0.875rem;
    ">
      Created by <strong style="color: #4a5568;">SANOOP SYAMALAN</strong> • Associate Director • Kennedy Property Brokers LLC
    </div>
  </div>

  <script>
    // ========================================
    // 📝 EASY UPDATE SECTION - Change values here
    // ========================================
    // 
    // ⚠️  IMPORTANT RULES:
    // 1. Only change the NUMBERS and DATES inside quotes
    // 2. Keep all commas (,) and semicolons (;) exactly as they are
    // 3. Don't delete any quotation marks (" ")
    // 4. Numbers should NOT have commas (write 1340410 not 1,340,410)
    // 5. Decimal numbers use dots (.) not commas (write 90406.81 not 90406,81)
    //
    // 💡 EXAMPLES OF CORRECT CHANGES:
    // ✅ CORRECT: totalPaid: 1500000,
    // ❌ WRONG:   totalPaid: 1,500,000,
    // ❌ WRONG:   totalPaid: 1500000
    // ❌ WRONG:   totalPaid 1500000,
    //
    const CONFIG = {
      // 💰 PAYMENT AMOUNTS (in AED - no commas in numbers!)
      // =====================================================
      totalPaid: 1341410,           // 🔄 UPDATE THIS: Total amount paid including SPA fees
                                    // Example: If you paid 50,000 more, change to: 1391410
                                    // Example: If you paid 100,000 more, change to: 1441410
      
      purchasePrice: 3125008,       // 🔒 DON'T CHANGE: Total property price (usually fixed)
      
      registrationFee: 1000,        // 🔒 DON'T CHANGE: Admin fee (usually fixed)
      
      overpayment: 90406.80,        // 🔄 UPDATE THIS: Overpayment based on purchase price milestones
                                    // Example: If no overpayment, change to: 0
                                    // Example: If overpaid by 120,000, change to: 120000
                                    // ⚠️  Use decimal point (.) for cents: 90406.80
      
      // 📅 NEXT PAYMENT DETAILS
      // =====================================================
      nextInstallmentAmount: 312500.80,  // 🔄 UPDATE THIS: Next payment amount due
                                         // Example: If next payment is 400,000, change to: 400000
                                         // ⚠️  Use decimal point (.) for cents: 312500.80
      
      nextPaymentDate: "24 March 2026",  // 🔄 UPDATE THIS: When next payment is due
                                         // ⚠️  Keep the format: "DD Month YYYY"
                                         // Examples: "15 April 2026", "30 December 2025"
                                         // Examples: "01 January 2027", "28 February 2026"
      
      nextPaymentDueDate: new Date("2026-03-24T00:00:00+04:00"),  // 🔄 UPDATE THIS: Same date but different format
                                                                  // ⚠️  Format: "YYYY-MM-DDTHH:MM:SS+04:00"
                                                                  // Examples: "2026-04-15T00:00:00+04:00"
                                                                  // Examples: "2025-12-30T00:00:00+04:00"
                                                                  // 📝 Month numbers: Jan=01, Feb=02, Mar=03, Apr=04, May=05, Jun=06
                                                                  //                   Jul=07, Aug=08, Sep=09, Oct=10, Nov=11, Dec=12
      
      // 💱 CURRENCY RATE
      // =====================================================
      usdRate: 0.272                // 🔄 UPDATE IF NEEDED: AED to USD conversion rate
                                    // Example: If rate changes to 0.275, change to: 0.275
                                    // ⚠️  Always use decimal point: 0.272 (not 0,272)
    };
    
    // 📋 QUICK REFERENCE - COMMON UPDATES:
    // ===================================
    // 
    // 🏦 AFTER MAKING A PAYMENT:
    // 1. Add your new payment to totalPaid
    //    Old: totalPaid: 1340410,
    //    New: totalPaid: 1440410,  (if you paid 100,000 more)
    //
    // 2. Update overpayment if needed
    //    Old: overpayment: 90406.81,
    //    New: overpayment: 190406.81,  (if now overpaid by 190,406.81)
    //
    // 📅 WHEN NEXT PAYMENT DATE CHANGES:
    // 1. Update both date fields:
    //    nextPaymentDate: "15 June 2026",
    //    nextPaymentDueDate: new Date("2026-06-15T00:00:00+04:00"),
    //
    // 🏁 WHEN MOVING TO NEXT INSTALLMENT:
    // 1. Update nextInstallmentAmount to new amount
    //    Old: nextInstallmentAmount: 312500.80,
    //    New: nextInstallmentAmount: 400000,  (if next installment is 400,000)
    //
    // ========================================
    // 🛑 END OF EASY UPDATE SECTION
    // ❌ DON'T CHANGE ANYTHING BELOW THIS LINE
    // ========================================

    /* ========================================================================
       🔧 JAVASCRIPT FUNCTIONALITY - Dynamic calculations and interactions
       ========================================================================
       
       🎯 KEY FUNCTIONS:
       1. toggleSection() - Handles collapsible payment sections
       2. updateCountdown() - Real-time countdown to next payment
       3. Dynamic value population - Calculates and displays all amounts
       4. Currency conversion - AED to USD conversions
       
       💡 CALCULATION METHODOLOGY:
       - Separates property payments from SPA fees
       - Overpayment calculated against property milestones only
       - Next payment reduced by available overpayment credit
       ======================================================================== */

    // ========================================
    // 🗂️ COLLAPSIBLE SECTIONS FUNCTIONALITY
    // ========================================
    
    /* Handle expand/collapse for payment detail sections */
    function toggleSection(sectionId) {
      const content = document.getElementById(sectionId + '-content');
      const header = content.previousElementSibling;
      const icon = header.querySelector('.expand-icon');
      
      if (content.classList.contains('expanded')) {
        // Close current section
        content.classList.remove('expanded');
        header.classList.remove('expanded');
      } else {
        // Close all other sections first (accordion-style behavior)
        document.querySelectorAll('.payment-content.expanded').forEach(el => {
          el.classList.remove('expanded');
          el.previousElementSibling.classList.remove('expanded');
        });
        
        // Open clicked section
        content.classList.add('expanded');
        header.classList.add('expanded');
      }
    }

    // ========================================
    // ⏰ COUNTDOWN TIMER FUNCTIONALITY
    // ========================================
    
    const dueDate = CONFIG.nextPaymentDueDate;

    /* Update countdown display every second */
    function updateCountdown() {
      const now = new Date();
      const diff = dueDate - now;

      // Check if payment is overdue
      if (diff <= 0) {
        document.getElementById("countdown").textContent = "Payment due date has passed!";
        return;
      }

      // Calculate time remaining
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      // Display formatted countdown
      document.getElementById("countdown").textContent =
        `⏰ ${days} days, ${hours} hours, ${minutes} minutes, ${seconds} seconds`;
    }

    // ========================================
    // 💰 FINANCIAL CALCULATIONS
    // ========================================
    
    // Extract configuration values
    const totalPaid = CONFIG.totalPaid;
    const purchasePrice = CONFIG.purchasePrice;
    const registrationFee = CONFIG.registrationFee;
    const overpayment = CONFIG.overpayment;
    
    /* ========================================================================
       🧮 KEY CALCULATION METHODOLOGY EXPLANATION
       ========================================================================
       
       💡 SEPARATION PRINCIPLE: Property vs Administrative Fees
       
       🔹 TOTAL PAYMENTS TRACKING:
         - totalPaid (1,341,410 AED) = All money paid to developer
         - Includes both property payments AND SPA registration fees
       
       🔹 PROPERTY PROGRESS CALCULATION:
         - propertyPayments = totalPaid - registrationFee
         - Only property payments count toward ownership milestones
         - SPA fees are administrative costs, not property equity
       
       🔹 OVERPAYMENT LOGIC:
         - Based on 40% milestone (20% + 10% + 10% completed)
         - Expected: 40% of 3,125,008 = 1,250,003.20 AED
         - Actual property payments: 1,340,410 AED (excluding SPA)
         - Overpayment: Property payments exceed expected milestone
       
       🔹 NEXT PAYMENT CALCULATION:
         - Standard installment amount: 312,500.80 AED
         - Minus available overpayment credit
         - Result: Actual amount needed for next payment
       ======================================================================== */
    
    // Separate property payments from total payments (key methodology)
    const propertyPayments = totalPaid - registrationFee;
    const totalRemainingBalance = purchasePrice - propertyPayments;
    const nextInstallmentAmount = CONFIG.nextInstallmentAmount;
    const nextInstallmentBalance = nextInstallmentAmount - overpayment; // What they need to pay for next installment
    
    // ========================================
    // 🖥️ DYNAMIC UI POPULATION
    // ========================================
    
    /* Populate header information dynamically with calculated values */
    
    // Purchase Price display (property value only)
    document.getElementById("purchasePrice").innerHTML = 
      `AED ${purchasePrice.toLocaleString()} <span class="usd-amount">USD ${Number((purchasePrice * CONFIG.usdRate).toFixed(0)).toLocaleString()}</span>`;
    
    // Registration Fee display (administrative cost, marked as paid)
    document.getElementById("registrationFee").innerHTML = 
      `AED ${registrationFee.toLocaleString()} <span class="usd-amount">USD ${Number((registrationFee * CONFIG.usdRate).toFixed(0)).toLocaleString()}</span><span class="overview-subtitle">Paid</span>`;
    
    // Total Paid display (all payments including SPA)
    document.getElementById("totalPaid").innerHTML = 
      `AED ${totalPaid.toLocaleString()} <span class="usd-amount">USD ${Number((totalPaid * CONFIG.usdRate).toFixed(0)).toLocaleString()}</span><span class="overview-subtitle">Installments + SPA Fees</span>`;
    
    // Remaining Balance display (property only, with percentage)
    document.getElementById("remainingBalance").innerHTML = 
      `AED ${totalRemainingBalance.toLocaleString()} <span class="usd-amount">USD ${Number((totalRemainingBalance * CONFIG.usdRate).toFixed(0)).toLocaleString()}</span><span class="overview-subtitle">${((totalRemainingBalance/purchasePrice)*100).toFixed(1)}% remaining</span>`;
    
    // Overpayment Credit display (available for future payments)
    document.getElementById("overpayment").innerHTML = 
      `AED ${overpayment.toLocaleString()} <span class="usd-amount">USD ${Number((overpayment * CONFIG.usdRate).toFixed(0)).toLocaleString()}</span><span class="overview-subtitle">Available credit</span>`;
    
    // Next Payment Due display (after applying overpayment credit)
    document.getElementById("installmentBalance").innerHTML = 
      `AED ${nextInstallmentBalance.toLocaleString()} <span class="usd-amount">USD ${Number((nextInstallmentBalance * CONFIG.usdRate).toFixed(0)).toLocaleString()}</span><span class="overview-subtitle">After credit applied</span>`;
    
    // ========================================
    // 📊 OVERPAYMENT STATUS DISPLAY
    // ========================================
    
    /* Display overpayment status with detailed breakdown */
    if (overpayment > 0) {
      document.getElementById("overpaidStatus").innerHTML =
        `<strong style="color: #27ae60;">💰 Overpaid by AED ${overpayment.toLocaleString()} (USD ${Number((overpayment * CONFIG.usdRate).toFixed(2)).toLocaleString()}) ✅</strong><br>
         <span style="color: #2c5f2d;">🎯 This covers ${((overpayment/CONFIG.nextInstallmentAmount)*100).toFixed(1)}% of your next installment!</span>`;
    } else {
      document.getElementById("overpaidStatus").textContent = "No overpayment.";
    }

    // ========================================
    // ⏰ INITIALIZE COUNTDOWN TIMER
    // ========================================
    
    /* Start the countdown timer and update it every second */
    setInterval(updateCountdown, 1000);
    updateCountdown(); // Initial call to display immediately
  </script>

</body>
</html>
